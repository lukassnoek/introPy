
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creating a Builder experiment from scratch (tutorial) &#8212; introPy</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Test your Builder skills!" href="builder_test.html" />
    <link rel="prev" title="Introduction to the PsychoPy Builder (tutorial)" href="psychopy_builder_part1.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">introPy</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Welcome to introPy
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../getting_started/about.html">
   About this course
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../getting_started/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../getting_started/jupyter.html">
   The Jupyter ecosystem
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Python (week 1)
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../week_1/python.html">
   Python essentials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../solutions/week_1/0_introduction.html">
   Introduction to Python (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../solutions/week_1/1_python_basics.html">
   Python basics (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../solutions/week_1/2_matplotlib.html">
   Introduction to Matplotlib (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../solutions/week_1/3_pandas.html">
   Introduction to Pandas (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../solutions/week_1/4_numpy.html">
   Introduction to Numpy (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../solutions/week_1/5_extra_exercises.html">
   Extra exercises (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../week_1/python_how_to_continue.html">
   How to continue with Python?
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  PsychoPy (week 2)
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="psychopy.html">
   PsychoPy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="intro_psychopy.html">
   Introduction to PsychoPy (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="psychopy_builder_part1.html">
   Introduction to the Builder (T)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   A Builder experiment from scratch (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="builder_test.html">
   Test your Builder skills!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="psychopy_coder_part1.html">
   Introduction to the Coder (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="psychopy_coder_part2.html">
   A Coder experiment from scratch (T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coder_test.html">
   Test your Coder skills!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="psychopy_how_to_continue.html">
   How to continue with PsychoPy?
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Misc
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/bibliography.html">
   Bibliography
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/for_developers.html">
   For developers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/CONTRIBUTING.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/CONDUCT.html">
   Code of Conduct
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/week_2/psychopy_builder_part2.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/lukassnoek/introPy"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/lukassnoek/introPy/issues/new?title=Issue%20on%20page%20%2Fweek_2/psychopy_builder_part2.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/lukassnoek/introPy/edit/master/intropy/week_2/psychopy_builder_part2.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-new-experiment">
   Create a new experiment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-routines-and-adding-components">
   Creating routines and adding components
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#keyboard-interaction">
   Keyboard interaction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#shape-polygon-components">
   Shape (polygon) components
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loops-and-conditions-files">
   Loops and conditions files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mouse-interaction">
   Mouse interaction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#image-components">
   Image components
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#code-components-optional">
   Code components (optional)
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="creating-a-builder-experiment-from-scratch-tutorial">
<h1>Creating a Builder experiment from scratch (tutorial)<a class="headerlink" href="#creating-a-builder-experiment-from-scratch-tutorial" title="Permalink to this headline">¶</a></h1>
<p>Alright, now let’s get to the interesting part: actually creating experiments! In this tutorial, we will guide you through creating a “Stroop task”, step by step. If you are not familiar with the Stroop task, check out the video below!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/reUic5tyVwo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Using the Builder interface, we are going to create a simple color-word Stroop experiment, including instructions, with two conditions: <em>congruent</em> (trials in which the text color matches the word, e.g., <span style="color:red">red</span>) and <em>incongruent</em> (trials in which the text color is different from the word, e.g., <span style="color:green">red</span>). Along the way, we explain several PsychoPy features, which you will practice with in <em>ToDos</em>. A finished Stroop experiment is available under <code class="docutils literal notranslate"><span class="pre">solutions/week_2/Builder/stroop.psyexp</span></code>, but we highly recommend that you first try to complete the exercises without peaking at the solution!</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure you save your experiment (<em>File</em> → <em>Save</em>, or <code class="docutils literal notranslate"><span class="pre">cmd/ctrl</span> <span class="pre">+</span> <span class="pre">s</span></code>) often during this tutorial!</p>
</div>
<div class="section" id="create-a-new-experiment">
<h2>Create a new experiment<a class="headerlink" href="#create-a-new-experiment" title="Permalink to this headline">¶</a></h2>
<p>Let’s start by creating a new experiment.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Create a new experiment (<em>File</em> → <em>New</em>) and immediately save the experiment with the name <code class="docutils literal notranslate"><span class="pre">stroop.psyexp</span></code> in the <code class="docutils literal notranslate"><span class="pre">tutorials/week_2</span></code> folder.</p>
</div>
<p>Also, let’s change some of the default settings.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>In the <em>Experiment settings</em> window (<em>Basic</em> tab), enter <code class="docutils literal notranslate"><span class="pre">stroop</span></code> next to <em>Experiment name</em> and remove the <code class="docutils literal notranslate"><span class="pre">session</span></code> option in the <em>Experiment info</em> box. In the <em>Data</em> tab, make sure the data is saved as <code class="docutils literal notranslate"><span class="pre">sub-{nr}</span></code>. Finally, in the <em>Screen</em> tab, make sure the experiment uses your own monitor (which you created in an earlier tutorial) and set the <em>Units</em> to “norm”.</p>
</div>
<p>Note that the choice of <a class="reference external" href="https://www.psychopy.org/general/units.html">normalized units</a> (“norm”) is somewhat arbitrary. We personally like it to easily create stimuli with the appropriate size (but YMMV).</p>
</div>
<div class="section" id="creating-routines-and-adding-components">
<h2>Creating routines and adding components<a class="headerlink" href="#creating-routines-and-adding-components" title="Permalink to this headline">¶</a></h2>
<p>Let’s start our experiment with a nice welcome to our participants who are willing to participate in our experiment. To do so, we’ll create a new routine with a single text component. Note that new experiments contain, by default, a single routine named <em>trial</em>.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>We’ll use the default <em>trial</em> routine, but let’s rename it to <em>welcome</em>. In the flow pane, right-click the <em>trial</em> routine, select <em>rename</em>, and change its name to <em>welcome</em>. Then, in the components pane, select a text component.</p>
</div>
<p>After clicking on the text component icon, the previously discussed properties window pops up. This window has different tabs, but most often you only change things in the <em>Basic</em> tab (and sometimes in the <em>Advanced</em> tab). First of all, although PsychoPy provides a default component name (here: “text”), we recommend you choose a descriptive name of the new component.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Give the component a new, descriptive name in the <em>Name</em> field (e.g., <code class="docutils literal notranslate"><span class="pre">welcome_txt</span></code>).</p>
</div>
<p>Then, the next property to determine is the start (onset) and stop (offset) of the component relative to the start of the current routine. For both the start and the stop times of your component, you can choose whether to define these times in seconds — <code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">(s)</span></code> in the dropdown menu — or in the number of frames — <code class="docutils literal notranslate"><span class="pre">frame</span> <span class="pre">N</span></code> in the dropdown menu. We will revisit timing in terms of the number of frames in the <em>Coder</em> tutorials later; for now, we will use the <code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">(s)</span></code> option (for more info about the <code class="docutils literal notranslate"><span class="pre">frame</span> <span class="pre">N</span></code> and <code class="docutils literal notranslate"><span class="pre">condition</span></code> options, check <a class="reference external" href="https://www.psychopy.org/builder/startStop.html">the PsychoPy website</a>).</p>
<p>In addition to the seconds/frames option, the stop time can also be defined in terms of the component’s duration (which is, in fact, the default). When the start time is 0, then the <code class="docutils literal notranslate"><span class="pre">duration</span> <span class="pre">(s)</span></code> and <code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">(s)</span></code> give the same results, of course.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Set the component onset to 0 and the duration to 3 seconds.</p>
</div>
<p>Other properties include the color and font of the text component. The <em>Color</em> property accepts any standard <a class="reference external" href="https://www.w3schools.com/Colors/colors_names.asp">X11 color name</a> and you can use any font available on your system. For now, let’s leave these properties at their default values (<code class="docutils literal notranslate"><span class="pre">white</span></code> and <code class="docutils literal notranslate"><span class="pre">Arial</span></code>).</p>
<p>The next property is the size (or <em>Letter height</em>) of the text. The units of the font size are whatever you specified in the <em>Experiment settings</em>! As we specified normalized units, the default (<code class="docutils literal notranslate"><span class="pre">0.1</span></code>) represents 10% of the half the the screen. Then, you can specify the position of text component with two numbers: <code class="docutils literal notranslate"><span class="pre">x</span></code> (the horizontal position) and <code class="docutils literal notranslate"><span class="pre">y</span></code> (the vertical position). Like the letter height, the units depend on whatever you specified in the <em>Experiment settings</em>.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Let’s make this a little bigger. Set the letter height to 0.2. Then (for now specific reason whatsover), set the position such that the text will appear horizontally in the middle, but vertically halfway between the top and the middle. Make sure you have read the explanation of <a class="reference external" href="https://www.psychopy.org/general/units.html">normalized units on the PsychoPy website</a> before you try to do this!</p>
</div>
<p>Finally, the only thing we need to specify is, of course, the text itself! In the box associated with the <em>Text</em> property, you may specify any plain text, including line breaks (“enters”). Note that PsychoPy will automatically try to wrap the text if it exceeds the window (which can be customized with the <em>Wrap width</em> option in the <em>Advanced</em> tab).</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add some text to the text component to welcome our participant. When you’re done, click <code class="docutils literal notranslate"><span class="pre">OK</span></code> to save all the changes to the properties.</p>
</div>
<p>By now, you should see the new text component in both the <em>routines</em> pane (with its onset/offset) and in the <em>flow</em> pane. Try running the experiment by clicking on the green play button (►) to check whether everything works as expected! If the <em>Experiment runner</em> displays <code class="docutils literal notranslate"><span class="pre">#####</span> <span class="pre">Experiment</span> <span class="pre">ended.</span> <span class="pre">#####</span></code>, everything ran without problems.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Each Builder component has a <em>Help</em> button in the lower left corner of the properties window. If you click this button, your browser will open the PsychoPy documentation of the associated component!</p>
</div>
</div>
<div class="section" id="keyboard-interaction">
<h2>Keyboard interaction<a class="headerlink" href="#keyboard-interaction" title="Permalink to this headline">¶</a></h2>
<p>After welcoming our participants, let’s give them some general instructions about our task. As a side note, we want to stress that spending some time and effort to create clear and extensive instructions can, in our experience, matter a lot for the quality of your data! Here, we’ll keep it short, but keep this in mind for your future experiments.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add a new routine (<em>Experiment</em> → <em>New Routine</em>) and name it <code class="docutils literal notranslate"><span class="pre">instructions</span></code>.</p>
</div>
<p>After doing so, you should see that an empty routine appears in the routine pane. Also, note that PsychoPy does not automatically add your new routine to the flow pane (after all, it doesn’t know <em>where</em> you want this routine to appear). To do so, click on <em>Insert Routine</em> in the flow pane, select the <em>instructions</em> routine, and click on the flow in between the <em>welcome</em> routine and the right arrow head.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add the <em>instructions</em> routine to the flow right after the <em>welcome</em> routine.</p>
</div>
<p>Now, we need another text component with instructions of course, but this time we are going to implement it slightly differently than we did in the <em>welcome</em> routine. We want to make sure our participants have enough time to read the instructions, so setting a predefined duration (like we did in the <em>welcome</em> routine) is not ideal. Instead, we will let the participant indicate whenever they are done and want to continue by having them press the return (“enter”) key. But first, we need a text component with some instructions.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add a text component with the following text:</p>
<blockquote>
<div><p>In this experiment, you will see words (either “green” or “red”) in different colors (also either “green” or “red”).
Importantly, you need to respond to the COLOR of the word and you need to ignore the actual word. You respond with the arrow keys:</p>
<p>GREEN color = left
RED color = right</p>
<p>(Press ‘enter’ to start the experiment!)</p>
</div></blockquote>
<p>Give the component a sensible name, keep the letter height at the default (0.1), and leave the <em>stop</em> property empty.</p>
</div>
<p>The effect of leaving the <em>stop</em> property empty is that you, technically, create a component with an infinite duration. This is highlighted in the routine pane by the bar corresponding to the component extending beyond the time axis. As mentioned, we’d like to continue the experiment if the participant pressed the return key. To implement this, we’ll need to add a <a class="reference external" href="https://www.psychopy.org/builder/components/keyboard.html"><em>keyboard component</em></a>. In addition to some standard properties (like <em>name</em>, <em>start</em>, and <em>stop</em>), the keyboard component also has the property <em>Allowed keys</em>, which specifies which keys are recorded and affect this component, and <em>Store</em>, which specifies which of the potentially multiple key presses should be saved. The property <em>Store correct</em> is not relevant, here, so we’ll ignore that for now.</p>
<p>Another important property, especially in our current use case, is the <em>Force end of Routine</em> option. When enabled (the default), it will end the current routine and move on to the next whenever one of the allowed keys is pressed, which is exactly what we want for our instruction routine!</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add a keyboard component to the <em>instruction</em> routine. Make sure the <em>stop</em> property is left empty and that it ends the routine when the participant presses the return key (i.e., use “return” for <em>Allowed keys</em>).</p>
</div>
<p>If you did the ToDo correctly, you should see a new keyboard component in the <em>instruction</em> routine which similarly extends beyond the time axis of the routine pane (indicating that it does not have an offset). Now, run the experiment again and check whether the instruction routine works as expected! (Note: because the <em>instruction</em> routine is the experiment’s last routine, it may seem that the experiment doesn’t advance immediately after pressing enter, but that’s because it takes a second or two to quit the experiment after the last routine due to saving data and such.)</p>
<p>If this were a real experiment for your master thesis, for example, we’d recommend adding some more detailed instructions and practice trials. Also, you probably want to use a larger variety of color-word pairs to increase generalizability (see, e.g., <a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5428747/">Westfall, Nichols, &amp; Yarkoni, 2017</a>). But to keep this experiment relatively simple, our current instructions suffice and we’ll only work with two colors (green and red).</p>
</div>
<div class="section" id="shape-polygon-components">
<h2>Shape (polygon) components<a class="headerlink" href="#shape-polygon-components" title="Permalink to this headline">¶</a></h2>
<p>Often, experiments contain a “fixation target” before and in between trials to prevent participants from making too many eyemovements which may impact the results. Often, a simple plus sign is used (which can be created using a text component). For educational purposes, however, let’s use a small circle (“fixation dot”), which can be created using the <em>Polygon</em> component. Let’s add an initial fixation target to our experiment, so that the first trial doesn’t immediately show up after the instructions.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Create a new routine, named <em>init_fix</em>, with a single <em>Polygon</em> component representing a white circle of size (0.01, 0.01) lasting 2 seconds. Note: “circle” is not part of the standard polygon shapes you can choose. Read the <a class="reference external" href="https://www.psychopy.org/builder/components/polygon.html">documentation</a> carefully to figure out how to create a circle!</p>
</div>
<p>After creating the <em>init_fix</em> routine, run the experiment to see whether it works as expected!</p>
<div class="attention admonition">
<p class="admonition-title">ToThink</p>
<p>If you run the experiment, the fixation dot may look more like an oval than a circle… Do you understand why? Do you know how to fix this? Hint: it has to do with the experiment’s units.</p>
</div>
<p>If you want a challenge, try the (optional) ToDo below.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>In their article <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S0042698912003380">What is the best fixation target? The effect of target shape on stability of fixational eye movements</a> <span id="id1">[<a class="reference internal" href="../misc/bibliography.html#id5">Thaler <em>et al.</em>, 2013</a>]</span>, Thaler and colleagues (2013) investigate the effect of different fixation targets on eye movements and find that the fixation target below leads to the fewest eye movements.</p>
<p><img alt="optimal_fix" src="../_images/optimal_fix.png" /></p>
<p>Try creating this “optimal fixation target” instead of the circle from the previous ToDo. Note that you need multiple <em>Polygon</em> components in the same routine to achieve this.</p>
</div>
</div>
<div class="section" id="loops-and-conditions-files">
<h2>Loops and conditions files<a class="headerlink" href="#loops-and-conditions-files" title="Permalink to this headline">¶</a></h2>
<p>Now, it’s time to focus on the most important element of the experiment: the actual “color-word” trials! To do so, we can create a routine with a single text component (in which we can vary the text itself and the text color). Let’s start with a congruent trial in which both the word and the color is red. Also, it would be nice if the routine terminates after 5 seconds <em>or</em> upon a button press (limited to either the ‘left’ or ‘right’ keys) and is followed by a fixation target routine of 0.5 seconds (a so-called “inter-stimulus interval”, or ISI).</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add a new routine, named <em>stim</em>, with a text stimulus (<em>trial_txt</em>) with the word “red” in the color red and font size 0.2, which terminates after 5 seconds <em>or</em> when the participant presses the left or right arrow key (for which you need to add a keyboard component!) and is followed by a new routine, named <em>isi</em>, which shows a fixation dot (like in the <em>init_fix</em> routine we created before) for 0.5 seconds. Try running the experiment when you’re done to see whether everything works as expected!</p>
</div>
<p>Alright, that’s a start. But we need more than one trial, of course! One strategy would be to keep adding adding additional <em>stim</em> routines (e.g., <em>stim1</em>, <em>stim2</em>, … , <em>stim100</em>) with different color-word pairs and subsequent ISI routines (e.g., <em>isi1</em>, <em>isi2</em>, …, <em>isi100</em>), but that would not be very efficient, right? You probably see where I’m going: we can use a <em>loop</em> for this! In this loop, we can reuse the general structure of the trial (a <em>stim</em> routine + a <em>isi</em> routine) and only vary the elements that differ across trials (i.e., the words and text colors). These varying elements can be <em>any</em> property of <em>any</em> component within the loop!</p>
<p>The way to specify the varying elements in a loop is through a <em>conditions file</em> (an Excel or CSV file). In this file, the rows represent the different trials and the columns represent the different elements that vary across trials. For our Stroop experiment, we could create a file, <em>conditions.xlsx</em> (or <em>conditions.csv</em>) with two columns — <em>stim_word</em> and <em>stim_color</em> — and twenty rows: 5 rows for each color-word combination (5 for red-red, 5 for red-green, 5 for green-green, and 5 for green-red), assuming we want a 50/50 split between the congruent/incongruent conditions. The values for the <em>stim_word</em> and <em>stim_color</em> columns can then be used to modify, per iteration of the loop, the <em>Text</em> and <em>Color</em> attributes of our text component, respectively.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Create an Excel (or CSV) file with two columns named <em>stim_word</em> and <em>stim_color</em> and 20 rows outlining the words and colors (which should be either <em>red</em> or <em>green</em>). Note that your final file should have 21 rows (the first row being the column headers). Make sure to save this file in the same directory as your <code class="docutils literal notranslate"><span class="pre">stroop.psyexp</span></code> file.</p>
</div>
<p>Now, to create the loop, you need to click <em>Insert Loop</em> in the flow pane. Then, when hovering your cursor above the actual flow diagram, a small circle should appear; click on the flow diagram where you’d like your loop to start and click a second time on the diagram where you’d like to your loop to end, after which a new <em>Loop Properties</em> window should pop up. In this window, you can specify the name of the loop, the type of the loop (i.e., how to loop across the different rows), and whether this is a loop across trials or blocks (i.e., the <em>Is trials</em> option, which you may ignore for now).</p>
<p>The <em>nReps</em> property indicates how often you want to loop across your different trials and the <em>Selected rows</em> optionally allows you to specify a subset of rows to loop over. By setting the <em>random seed</em> (an integer), you can make sure that the loop shuffles the trials the same way every time you run the experiment. Finally, the <em>Conditions</em> property should point to the Excel or CSV file with the properties that change across the different trials.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Create a loop across the <em>stim</em> and <em>isi</em> routines (i.e., the loop should encompass these two routines). Name this loop <em>trial_loop</em> and make sure it loops randomly across trials a total for 3 repetitions (generating 60 trials). No need to select a subset of rows or to set a random seed. Select your previously created <em>conditions.xlsx</em> (or <em>conditions.csv</em>) for the <em>Conditions</em> property.</p>
</div>
<p>Although we have created our loop, the data in the <em>Conditions</em> file has not been linked to our text component (in the <em>stim</em> routine), yet! To do so, we need to modify the <em>Color</em> and <em>Text</em> properties in our text component in two ways. First, we need to tell PsychoPy that the value of the property changes every iteration of the loop. To do so, we need to change the <em>constant</em> value to <em>set every repeat</em> in the dropdown menu next to the property. Second, we need to tell PsychoPy the column name (from our conditions file) that contains the values for the property we want to update every iteration. Importantly, this column name needs to be prefixed by a dollar sign (<code class="docutils literal notranslate"><span class="pre">$</span></code>), i.e., <code class="docutils literal notranslate"><span class="pre">$some_column_name</span></code>.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>In the text component from your <em>stim</em> routine, change <em>constant</em> to <em>set every repeat</em> for both the <em>Color</em> and <em>Text</em> properties. Then, make sure the values for the <em>Color</em> and <em>Text</em> properties refer to the <em>stim_color</em> and <em>stim_word</em> columns from your conditions file, respectively. Click <em>OK</em> to update the text component. Run the experiment to see whether everything works as expected!</p>
</div>
<p>If you made it to this point in the tutorial: good job! You created a complete Stroop experiment from scratch! In the following sections, we’ll add some more (non-essential) elements to our experiment as an excuse to explain some more Builder components.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In the next section, we are going to add some routines after our trial loop. When we want to test this, it is quite annoying that we have to go through our entire trial loop before seeing the new routines. One way to “skip” the trial loop is to enable the <em>Disable component</em> property (in the <em>Testing</em> tab of the properties window) of each component in the <em>stim</em> and <em>isi</em> routines, which will skip said routines.</p>
<p>Another thing you can do is to set the <em>nReps</em> property of the loop to 0!</p>
</div>
</div>
<div class="section" id="mouse-interaction">
<h2>Mouse interaction<a class="headerlink" href="#mouse-interaction" title="Permalink to this headline">¶</a></h2>
<p>After the trials, we might want to get some feedback on the task from the participant. Let’s ask our participant the question “Did you like this task?” to which the participant can answer “yes” or “no”. This time, though, we’ll make the participant answer using the mouse (instead of the keyboard) by clicking in either a green circle on the left (for “yes”) or a red circle on the right (for “no”). Note that this is a completely useless addition the current experiment, but we included it nonetheless to demonstrate the Mouse component.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Create a new routine, named <em>feedback</em>, which creates a display like the image below (doesn’t have to <em>exactly</em> like it). Make sure each component has an infinite duration (by leaving the <em>stop</em> property empty). Hint: you can change the (RGB-specified) color of the Polygon components in the <em>Advanced</em> tab of the properties window. If you test your implementation, remember that you can use the <em>escape</em> key to abort the experiment.</p>
<p><img alt="fb_screen" src="../_images/feedback_screen_stroop.png" /></p>
</div>
<p>To enable interaction through the mouse we can, guess what, add a <em>Mouse</em> component! Like the keyboard component, this component can force the end of the routine with the <em>End Routine on Press</em> property. By default, this is set to <em>any click</em>, meaning that the routine will end at the first button press of the participant. However, we’d like to only end the routine when the participant made a “valid” click, i.e., clicked one of the circles. To do so, you can set the <em>End Routine on Press</em> to <em>valid click</em> and explicitly specify which components, when clicked, count as “valid clicks” at the <em>Clickable stimuli</em> property.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add a Mouse component, give it a sensible name, set the duration to infinite, and make sure it forces the end of the routine <em>only</em> when one of the circles have been clicked by filling in the component names of your circles in the <em>Clickable stimuli</em> field (separated by a comma). Run the experiment to see whether everything works as expected!</p>
</div>
</div>
<div class="section" id="image-components">
<h2>Image components<a class="headerlink" href="#image-components" title="Permalink to this headline">¶</a></h2>
<p>We are of course thankful for the participant’s efforts, so let’s thank them! We found a nice image to include in a final routine, <code class="docutils literal notranslate"><span class="pre">thank_you.png</span></code> (which is located in the <code class="docutils literal notranslate"><span class="pre">tutorials/week_2</span></code> directory). To embed an image in your experiment, you can use the <em>Image</em> component.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Add a new routine after the <em>feedback</em> routine, named <em>goodbye</em>, which contains a single Image component, which lasts 3 seconds. Make sure to set the <em>Image</em> property with the <code class="docutils literal notranslate"><span class="pre">thank_you.png</span></code> file. Run the experiment to see whether everything works as expected!</p>
</div>
</div>
<div class="section" id="code-components-optional">
<h2>Code components (optional)<a class="headerlink" href="#code-components-optional" title="Permalink to this headline">¶</a></h2>
<p>Alright, for those that want to delve a little deeper into the more advanced Builder features, let’s take a look at <em>Code</em> components (this is an optional section). With Code components, you can “inject” custom Python code into your Builder experiment. To showcase Code components, let’s use one to implement random ISIs (instead of the fixed 0.5 seconds we use now). Using variable instead of fixed ISIs is a trick to prevent participants to anticipate the upcoming stimulus/trial.</p>
<p>As we want to vary the ISI, we need to change the fixation dot in the <em>isi</em> routine. To do so, we’ll create a new Python variable that represents a random ISI in a Code compoment, which we subsequently need to link to the Polygon component (i.e., the fixation target). To generate a random ISI (e.g., uniformly distributed between 0 and 1), we can use the [uniform] function from the built-in Python module <code class="docutils literal notranslate"><span class="pre">random</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="n">t_isi</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">t_isi</span></code> is a float between 0 and 1. When creating a new Code component, the properties window actually allows you to specify different code types: Python (<code class="docutils literal notranslate"><span class="pre">py</span></code>), Javascript (<code class="docutils literal notranslate"><span class="pre">JS</span></code>), or a combination of both (<code class="docutils literal notranslate"><span class="pre">both</span></code>). Then, you can specify your code to run at different times during the experiment (<em>Before Experiment</em>, <em>Begin Experiment</em>, <em>End Experiment</em>) and routine (<em>Begin Routine</em>, <em>End Routine</em>).</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Create a new Code component, give it a sensible name, and make sure the code snippet above runs at the start of the <em>isi</em> routine.</p>
</div>
<p>The only thing we still need to do is to make sure the Polygon component uses the randomly generated ISI (i.e., <code class="docutils literal notranslate"><span class="pre">t_isi</span></code>) for its duration. In general, you can write Python code and access Python variables “under the hood” by prefixing the value by a dollar sign (<code class="docutils literal notranslate"><span class="pre">$</span></code>), like we did when accessing the columns from the conditions file earlier. So, to access the Python variable <code class="docutils literal notranslate"><span class="pre">t_isi</span></code> from our Code component for the Polygon <em>end</em> property, you can use <code class="docutils literal notranslate"><span class="pre">$t_isi</span></code>.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo</p>
<p>Make sure the <em>end</em> property of the fixation dot Polygon component uses the <code class="docutils literal notranslate"><span class="pre">t_isi</span></code> variable from our Code component. Then, run the experiment to verify that the ISIs are now different from trial to trial.</p>
</div>
<p>Alright, if you are up for a challenge, try one or both of the next ToDos.</p>
<div class="attention admonition">
<p class="admonition-title">ToDo (optional/difficult!)</p>
<p>In some experiments, you may want to give your participant feedback after each trial. Add a routine after the <em>stim</em> routine within the trial loop that shows, for 0.5 seconds, the text “correct!” when the participant gave the right response, “incorrect!” when the participant gave the wrong response, and “too late!” when the participant didn’t respond within 5 seconds. You need to include a Code component in this new routine that determines this feedback. Hint: in your Code component, the color of the current stimulus is stored in the Python variable <code class="docutils literal notranslate"><span class="pre">stim_color</span></code> and the response from the participant (i.e., either ‘left’ or ‘right’) is stored in the Python variable <code class="docutils literal notranslate"><span class="pre">{name_kb_comp}.keys</span></code> (replace <code class="docutils literal notranslate"><span class="pre">{name_kb_comp}</span></code> with the actual name of your keyboard componet in the <em>stim</em> routine).</p>
</div>
<div class="attention admonition">
<p class="admonition-title">ToDo (optional/difficult!)</p>
<p>In the current experiment, we indicated that participants should respond ‘left’ to green-colored words and ‘right’ to red-colored words. However, ideally, you’d want to counterbalance this color-response contingency across participants, i.e., (approximately) half of the participants should respond red-left/green-right and the other half should respond red-right/green-left. This between-subject condition should affect the text Component of the <em>instruction</em> routine. Arguably the easiest way to implement this is by creating another conditions file (e.g., <em>participants.{xlsx,csv}</em>) that outlines the color-response condition, which modifies the <em>instruction</em> routine.</p>
<p>Bonus: try to implement this ToDo and the previous optional ToDo in the same experiment!</p>
</div>
<p>Finally, we’re at the end of the Builder tutorial! By now, you know most of the essential features of PsychoPy’s Builder interface. Of course, PsychoPy offers many more (advanced) functionality and funky components, but we’ll leave that up to you to explore yourself! For now, let’s continue with the <a class="reference internal" href="psychopy_coder_part1.html"><span class="doc std std-doc">first Coder tutorial</span></a>!</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./week_2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="psychopy_builder_part1.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Introduction to the PsychoPy Builder (tutorial)</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="builder_test.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Test your Builder skills!</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Lukas Snoek<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>